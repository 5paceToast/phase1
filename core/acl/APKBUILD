pkgname=acl
pkgver=2.2.53
pkgrel=0
pkgdesc="Access control list utilities"
url="https://savannah.nongnu.org/projects/acl"
arch="all"
license="LGPL-2.1-or-later AND GPL-2.0-or-later"
depends="attr"
makedepends_build=""
makedepends_host="attr-dev"
makedepends="$makedepends_build $makedepends_host"
subpackages="$pkgname-dev $pkgname-doc"
# depends on order of nftw, and requires test machine to have ACLs enabled on FS
options="!check"
source="http://download.savannah.nongnu.org/releases/acl/acl-$pkgver.tar.gz"
replaces="libacl"

build() {
	cd "$builddir"
	unset PLATFORM
	export OPTIMIZER="${CFLAGS}"
	export DEBUG=-DNDEBUG
	CC=$CC CXX=$CXX LDFLAGS="-lintl" CONFIG_SHELL=/bin/sh ./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sbindir=/usr/bin \
		--libexecdir=/usr/lib
	make
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="176b7957fe0e7618e0b7bf2ac5071f7fa29417df718cce977661a576fa184e4af9d303b591c9d556b6ba8923e799457343afa401f5a9f7ecd9022185a4e06716  acl-2.2.53.tar.gz"
