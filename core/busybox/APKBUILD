pkgname=busybox
pkgver=1.31.0
pkgrel=1
pkgdesc="Size optimized toolbox of many common UNIX utilities"
url="https://busybox.net/"
arch="all"
license="GPL-2.0"
makedepends="linux-headers bash"
checkdepends="zip"
options="!check"
triggers="busybox.trigger=/bin:/usr/bin:/sbin:/usr/sbin:/lib/modules/*"
provides="/bin/sh"
source="https://busybox.net/downloads/$pkgname-$pkgver.tar.bz2
	busyboxconfig
	clang.patch
	"

builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	default_prepare
	cp -v $srcdir/busyboxconfig .config
}

build() {
	make
}

package() {
	mkdir -p $pkgdir/usr/bin
	install -m755 $builddir/busybox "$pkgdir"/usr/bin/busybox
}

sha512sums="cd58f0b2b6e3bb1b771fcf3d15f420518fb9b10086a45cfb1d7f136ac035be89eec28f9350e42b3fc38454d8bef9190eae0376497487c73785e8fde44c793730  busybox-1.31.0.tar.bz2
ace97d165b80121968458f57d856d7f0b12ff342defe87c33ed5f994f7b00027b65f7389f6d23120a7d11449378e3d503552e87b17a3bb18337d74992b125b14  busyboxconfig
91834325fd9b516606a48d0c4fb65bdff6f47ade33440e57523d83577b9b44356bd84937b1606068fe144e5ce9d8c2d1ea240fffee18cf6e3b11054c193ba34f  clang.patch"
