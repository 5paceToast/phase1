diff --git a/APKBUILD.5 b/APKBUILD.5
deleted file mode 100644
index fe0f833..0000000
--- a/APKBUILD.5
+++ /dev/null
@@ -1,569 +0,0 @@
-.Dd February 13, 2018
-.Dt APKBUILD 5 PRM
-.Os "Alpine Linux"
-.Sh NAME
-.Nm APKBUILD
-.Nd metadata and instructions to build a package
-.Sh SYNOPSIS
-.Nm /usr/src/packages/<repo>/<package>/APKBUILD
-.Sh DESCRIPTION
-An
-.Nm
-file is used by tools such as
-.Xr abuild 1
-to build a package for eventual installation by the
-.Xr apk 8
-package manager.
-It defines metadata such as the name of the package, the version information,
-the source license, and contact information for the developer.
-It additionally contains the commands needed to build, test, and install the
-package.
-.Pp
-The
-.Nm
-format is similar to a typical shell script; you set pre-defined variables and
-implement pre-defined functions, and the
-.Xr abuild 1
-(or similar) utility will use them to create the package.
-.Ss Required Variables
-The following variables must be set in all
-.Nm
-files:
-.Bl -tag -width Ds
-.It Cm pkgname
-Specifies name of the package.
-This is typically the name of the package upstream; however, note that all
-letters must be lowercased.
-.Pp
-Libraries for scripting languages should have a prefix before the library name
-describing the language.
-Such prefixes include
-.Em lua- ,
-.Em perl- ,
-.Em py- ,
-and
-.Em rb- .
-Not all languages use prefixes.
-For a definitive list, consult the PREFIXES file in the root directory of the
-repository you are using for packaging.
-.It Cm pkgver
-Specifies the version of the software being packaged.
-The version of a package must consist of one or more numbers separated by the
-radix (decimal point).
-The final number may have a single letter following it, for upstreams that use
-such a versioning scheme (such as 1.5a, 1.5b, 1.5c).
-.Pp
-After the final number (and optional single letter), a suffix may be appended,
-which must be an underscore (_) followed by one of
-.Em alpha ,
-.Em beta ,
-.Em pre ,
-.Em rc ,
-.Em cvs ,
-.Em svn ,
-.Em git ,
-.Em hg ,
-or
-.Em p ,
-optionally followed by another number.
-If the suffix is
-.Em alpha ,
-.Em beta ,
-.Em pre ,
-or
-.Em rc ,
-it is considered to be earlier than the version without a suffix; if the suffix
-is
-.Em cvs ,
-.Em svn ,
-.Em git ,
-.Em hg ,
-or
-.Em p ,
-it is considered to be later than the version without a suffix.
-All of the following examples are valid versions, in order from lowest to
-highest:
-.Pp
-1.0, 1.1_alpha2, 1.1.3_pre, 1.1.3, 1.1.3_hg, 1.2, 1.2a, 1.2b
-.It Cm pkgrel
-Specifies the package release number of this particular package version.
-This indicates when a package has changed without a corresponding change in
-version.
-Always increment
-.Cm pkgrel
-when you change the contents, dependencies, or metadata of a package.
-The first release of a package is always
-.Li 0 .
-.It Cm pkgdesc
-Specifies what the package contains.
-.Cm pkgdesc
-must be 128 characters or less, and should concisely describe what actions the
-software or items being packaged will allow the user to perform.
-For example,
-.Dq Fully-featured word processor with spell check and many plugins
-would be a sufficient
-.Cm pkgdesc
-for AbiWord.
-.It Cm url
-Specifies the Web address of the package's upstream.
-This allows users and future maintainers to find documentation, release
-information, and contact information for the package.
-If no Web address is available for the package, you must set
-.Cm url
-to an empty string ("").
-.It Cm arch
-Specifies the architectures for which the package may be built.
-It is highly recommended that you set this variable to "all" if the package is
-portable.
-.Pp
-You may use "noarch" if the package does not contain any architecture-specific
-binary files - that is, any files that are compiled for the target only.
-Such packages may include pure Python packages, shell script packages, and
-JARs.
-If you are not sure what this means, using "all" is safe.
-.It Cm license
-Specifies the license under which the package is distributed.
-The value provided must match a SPDX license identifier.
-.It Cm source
-Specifies the location of both local and remote source files used to build the
-package.
-Typically, the remote source file(s) or archive(s) is specified, followed by
-any local patches, install scripts, configuration files, or other necessary
-files.
-.El
-.Ss Optional Variables
-The following variables are not required, but may be set in any
-.Nm
-file:
-.Bl -tag -width Ds
-.It Cm checkdepends
-Specifies test-time dependencies of the package.
-Common packages that are used for testing include check, dejagnu, and
-perl-test-command.
-.It Cm depends
-Specifies the run-time dependencies of the package.
-The
-.Xr abuild 1
-utility will automatically scan the resultant package for shared library (.so)
-dependencies; do not specify them here.
-.It Cm install
-Specifies install scripts for the package, if any.
-See
-.Sx Install Scripts
-for more information about install scripts.
-.It Cm install_if
-Specifies a condition when
-.Xr apk 8
-should automatically install the package (or subpackage).
-For instance, the OpenRC subpackages set
-.Cm install_if
-to
-.Li openrc ${subpkgname%-openrc}=$pkgver-r$pkgrel
-which means that the OpenRC subpackage will be automatically installed if
-both OpenRC and the origin package are installed on the same computer.
-.It Cm makedepends
-Specifies build dependencies for the package.
-.It Cm pkggroups
-Specifies a space-separated list of login groups to create during build-time.
-Note that you will need to create the login groups in a pre-install install
-script as well; see
-.Sx Install Scripts
-for more information about install scripts.
-.It Cm pkgusers
-Specifies a space-separated list of user logins to create during build-time.
-Note that you will ned to create the user logins in a pre-install install
-script as well; see
-.Sx Install Scripts
-for more information about install scripts.
-.It Cm provides
-Specifies that the package "provides" the same contents as another package.
-There are two formats that you may use for
-.Cm provides :
-a provider name, and a provider name with version.
-.Pp
-Specifying a provider name with version such as
-.Li foobar=1.2
-will cause the package to be an "alias" of foobar version 1.2.
-It will be automatically installed if a user then runs
-.Li apk add foobar
-or similar, and it will conflict with a package named foobar.
-.Pp
-Specifying a provider name without a version such as
-.Li baz
-will cause the package to provide a "virtual" called baz.
-Multiple packages with the same virtual provider can be installed on a system;
-however, if a user runs
-.Li apk add baz
-they will provided a list of packages that provide baz and must select one and
-install it.
-.It Cm provider_priority
-Specifies the numeric value for
-.Xr apk 8
-to use for the package when considering which provider should be installed for
-the same
-.Cm provides
-virtual provider.
-.It Cm replaces
-Specifies packages that the package replaces.
-This is typically used for packages renamed by upstream.
-.It Cm subpackages
-Specifies subpackages or split packages built with this package.
-Typically, this will include
-.Li $pkgname-dev
-for development files (such as /usr/include and static library files) and
-.Li $pkgname-doc
-for documentation (such as /usr/share/doc and /usr/share/man).
-.Pp
-Each subpackage may be specified using three different methods.
-The first, and most common, is
-.Li $pkgname-foo
-where
-.Li foo
-is the name of the split function specified later in the file.
-Similar to the
-.Cm package
-function, the
-.Li foo
-function must move files from
-.Pa $pkgdir
-or
-.Pa $srcdir
-to
-.Pa $subpkgdir
-after creating
-.Pa $subpkgdir .
-.Pp
-The second method is to simply call the subpackage
-.Li foo
-which will create a package called
-.Li foo
-instead of pkgname-foo.
-.Pp
-However,
-.Li foo
-in both of these examples cannot contain a hyphen, as shell function names
-cannot have hyphens in them.  In this case, the third method may be used:
-.Li foo:funcname
-where
-.Li foo
-is the name of the subpackage and
-.Li funcname
-is the name of the shell function in the
-.Nm
-that creates it.
-.Pp
-Note that an additional colon may be used to specify an architecture for the
-subpackage; typically, this is used for marking miscellaneous files that are
-not architecture-specific as noarch.
-For example,
-.Li $pkgname-doc $pkgname-foo $pkgname-foo-misc:foo_misc:noarch
-will create the $pkgname-doc package using the
-.Cm doc
-function, the $pkgname-foo package using the
-.Cm foo
-function, and the $pkgname-foo-misc package using the
-.Cm foo_misc
-function and set $pkgname-foo-misc as noarch.
-.It Cm triggers
-Specifies a trigger script used by the package.
-A trigger script is a shell script that is called whenever monitored files or
-directories are modified.
-You may specify the paths to monitor using the triggers variable as follows:
-.Pp
-.Li $pkgname.trigger=/usr/share/man:/usr/local/share/man
-.Pp
-This will run the package trigger script whenever files in
-.Pa /usr/share/man
-or
-.Pa /usr/local/share/man
-are created, modified, or removed.
-.El
-.Ss options
-The
-.Cm options
-variable allows you to set parameters for the package at build time.
-There are a number of valid options you may set, and you may set multiple
-options by writing a space between each one.
-.Bl -tag -width Ds
-.It Cm !archcheck
-Specifies that the package contains binaries that cannot run on the target
-architecture.
-This is primarily used for packages containing firmware, and should typically
-never need to be used.
-.It Cm charset.alias
-Specifies that the package ships a /usr/lib/charset.alias file and that it
-should be installed on the user's system.
-This is almost never the case.
-Do not use this option.
-.It Cm !check
-Specifies that the package will not run a test suite.
-The reason for disabling the check phase should be noted in a comment.
-.It Cm checkroot
-Specifies that the package's test suite will be run in
-.Xr fakeroot 8 .
-This is necessary for some test suites which fail when run as non-root.
-.It Cm !dbg
-Specifies that the package should not be built with a debug information
-package.
-This is the default unless
-.Ev DEFAULT_DBG
-is set in the environment or
-.Xr abuild.conf 5 .
-It is typically used on packages that do not generate debug information (such
-as pure Python packages) or packages that do not support debug information
-packages.
-.It Cm !fhs
-Specifies that the package violates FHS and installs to a location such as
-.Pa /usr/local ,
-.Pa /opt ,
-or
-.Pa /srv .
-.It Cm ldpath-recursive
-Specifies that
-.Xr abuild 1
-should use the
-.Fl --recursive
-argument to
-.Xr scanelf 1
-when attempting to find shared library (.so) dependencies for the package.
-.It Cm libtool
-Specifies that the package requires its libtool (.la) files.
-They will not be automatically removed by
-.Xr abuild 1 .
-.It Cm net
-Specifies that the package build system requires access to a network.
-This is discouraged and an issue should be filed with the package's authors.
-.It Cm !strip
-Specifies that
-.Xr strip 1
-should not be run on any of the package's binaries.
-This is automatically implied if the -dbg subpackage is enabled, or if you are
-using
-.Ev DEFAULT_DBG .
-.It Cm suid
-Specifies that binaries in the package may be installed set-uid.
-This is a security risk and it is highly recommended to use capabilities or
-process separation instead of set-uid where available.
-.It Cm textrels
-Specifies that the package's binaries are known to contain relocations against
-text segments.
-By default,
-.Xr abuild 1
-will refuse to create such a package because this is a security concern.
-.It Cm toolchain
-Specifies that the package is part of the base toolchain set and may depend
-on packages like
-.Li g++ .
-.It Cm !tracedeps
-Specifies that
-.Xr abuild 1
-should not automatically populate
-.Cm depends
-with shared library (.so) or symlink target dependencies.
-.El
-.Ss Automatic Variables
-The following variables are defined for you by
-.Xr abuild 1 ,
-but may be overridden if necessary.
-.Bl -tag -width Ds
-.It Cm builddir
-Specifies the directory where the source code of the package will be built.
-The default value is
-.Pa $srcdir/$pkgname-$pkgver
-which is appropriate for most source distributions.
-If the source tarball does not create a $pkgname-$pkgver directory when it is
-unpacked, you must override
-.Cm builddir .
-.It Cm pkgdir
-Specifies the directory where the built files will be installed.
-Typically, you will call
-.Li make DESTDIR="$pkgdir" install
-or similar to install the files.
-The default value is
-.Pa $startdir/pkg
-and you should not modify this variable.
-.It Cm srcdir
-Specifies the directory where the files specified in
-.Cm source
-are downloaded and unpacked.
-The default value is
-.Pa $startdir/src
-and you should not need to modify this.
-.It Cm startdir
-Specifies the directory where the
-.Nm
-file resides.
-.It Cm subpkgdir
-Specifies the directory where the subpackage's files should be placed.
-This variable is only set inside subpackage functions.
-.El
-.Ss Special Variables
-The following variables are used only in special circumstances, and may be
-required or optional depending on their usage and the contents of other
-variables.
-.Bl -tag -width Ds
-.It Cm depends_dev
-Specifies the run-time dependencies of the -dev subpackage.
-.It Cm depends_doc
-Specifies the run-time dependencies of the -doc subpackage.
-.It Cm depends_libs
-Specifies the run-time dependencies of the -libs subpackage.
-.It Cm depends_openrc
-Specifies the run-time dependencies of the -openrc subpackage.
-.It Cm giturl
-Specifies the URL of the Git repository to use with
-.Cm abuild checkout .
-If the default branch of the repository is not desired, a different one may be
-specified by appending
-.Fl b Ar branch
-where
-.Cm branch
-is the branch to checkout.
-.El
-.Ss Functions
-Functions specified here may be present in any
-.Nm
-file, but with the exception of
-.Cm package ,
-are not strictly required.
-.Bl -tag -width Ds
-.It Cm fetch
-This function is called to download the remote files in
-.Cm source .
-.It Cm unpack
-This function unpacks any archives in
-.Cm source
-to
-.Ev srcdir .
-.It Cm prepare
-Prepares the source in
-.Ev srcdir
-to be built.
-The default
-.Cm prepare
-function ensures the build directories are set up correctly and applies any
-*.patch files specified in
-.Cm source .
-You must call
-.Cm default_prepare
-if you write a custom
-.Cm prepare
-function.
-.It Cm build
-Compiles the source in
-.Ev builddir .
-You must implement this function yourself.
-If no compilation is required, you may omit it.
-.It Cm check
-Runs the package's test suite.
-This function must be implemented unless
-.Li !check
-was specified in
-.Cm options .
-.It Cm package
-Installs the package into
-.Ev pkgdir .
-Note that
-.Ev pkgdir
-is not created for you; if this package installs no files (for example, a
-metapackage), you must use
-.Li mkdir -p "$pkgdir"
-to skip the package phase.
-.El
-.Ss Install Scripts
-An install script is run when an action is taken on a package by
-.Xr apk 8 .
-An install script must be written in shell and must have a
-.Li #!/bin/sh
-interpreter declaration as the first line.
-The
-.Cm install
-variable must contain the install scripts needed by the package.
-.Pp
-The install script will be run inside the root filesystem where the package is
-being installed.
-A single argument will be passed to all scripts, which is the version of the
-package being currently installed (or deinstalled).
-The pre-upgrade and post-upgrade scripts will have an additional second
-argument, which specifies the version of the package before the upgrade
-process.
-.Pp
-The different actions that may have install scripts specified are as follows:
-.Bl -tag -width Ds
-.It Ic $pkgname.pre-install
-Executed before the package is installed.
-If this script exits with an error (non-zero exit code),
-.Xr apk 8
-will halt the installation and the package will not be installed.
-This install script is typically used to create any users or groups needed as
-described in
-.Cm pkggroups
-and
-.Cm pkgusers .
-.It Ic $pkgname.post-install
-Executed after the package is installed.
-If this script exits with an error (non-zero exit code),
-.Xr apk 8
-will mark the package as broken.
-The
-.Li apk fix
-command will attempt to re-run the post-install script if this occurs.
-.It Ic $pkgname.pre-upgrade
-Executed before the package is upgraded.
-If this script exits with an error (non-zero exit code),
-.Xr apk 8
-will mark the package as broken.
-.It Ic $pkgname.post-upgrade
-Executed after the package is upgraded.
-If this script exits with an error (non-zero exit code),
-.Xr apk 8
-will mark the package as broken.
-The
-.Li apk fix
-command will attempt to re-run the post-upgrade script if this occurs.
-.It Ic $pkgname.pre-deinstall
-Executed before the package is removed from the system.
-If this script exits with an error (non-zero exit code),
-.Xr apk 8
-will not remove the package from the system.
-.It Ic $pkgname.post-deinstall
-Executed after the package is removed from the system.
-Exiting with an error will have no effect.
-.El
-.Sh IMPLEMENTATION NOTES
-Currently,
-.Nm
-files are sourced as normal shell scripts.  This may change at a later date.
-.Sh COMPATIBILITY
-The
-.Xr abuild 1
-utility as distributed by Alpine uses the BusyBox Almquist shell, a part of
-.Xr busybox 1
-that is currently undocumented.
-It is mostly compliant with
-.St -p1003.2 ,
-with some bash-like extensions.
-The
-.Xr abuild 1
-utility as distributed by Adélie uses the user's preferred /bin/sh, which is
-typically
-.Xr bash 1 .
-.Sh SEE ALSO
-SPDX license reference (on the Web at <https://spdx.org/licenses/>),
-.Xr abuild 1 ,
-.Xr newapkbuild 1 ,
-.Xr apk 8 .
-.Sh HISTORY
-The
-.Nm
-format and
-.Xr abuild 1
-utility first appeared in Alpine Linux 1.9.
-.Sh AUTHORS
-.An Timo Teräs Aq Mt timo.teras@iki.fi
-.An Natanael Copa Aq Mt ncopa@alpinelinux.org
-.Pp
-Documentation:
-.An A. Wilcox Aq Mt awilfox@adelielinux.org
-.\" .Sh BUGS
-.\" if we end up finding bugs that should be documented, put them here.
diff --git a/Makefile b/Makefile
index 71065d8..10aa736 100644
--- a/Makefile
+++ b/Makefile
@@ -6,16 +6,11 @@ prefix		?= /usr
 bindir		?= $(prefix)/bin
 sysconfdir	?= /etc
 datadir		?= $(prefix)/share/$(PACKAGE)
-mandir		?= $(prefix)/share/man
 
-SCRIPTS		:= abuild abuild-keygen abuild-sign newapkbuild \
+SCRIPTS		:= abuild abuild-keygen abuild-sign \
 		   abump apkgrel buildlab apkbuild-cpan checkapk \
 		   apkbuild-gem-resolver
 USR_BIN_FILES	:= $(SCRIPTS) abuild-tar abuild-gzsplit abuild-sudo abuild-fetch abuild-rmtemp
-MAN_1_PAGES	:= newapkbuild.1
-MAN_5_PAGES	:= APKBUILD.5
-SAMPLES		:= sample.APKBUILD sample.initd sample.confd \
-		sample.pre-install sample.post-install
 AUTOTOOLS_TOOLCHAIN_FILES := config.sub config.guess
 
 SCRIPT_SOURCES	:= $(addsuffix .in,$(SCRIPTS))
@@ -93,10 +88,9 @@ help:
 	@echo "$(P) makefile"
 	@echo "usage: make install [ DESTDIR=<path> ]"
 
-install: $(USR_BIN_FILES) $(SAMPLES) abuild.conf functions.sh
+install: $(USR_BIN_FILES) abuild.conf functions.sh
 	install -d $(DESTDIR)/$(bindir) $(DESTDIR)/$(sysconfdir) \
-		$(DESTDIR)/$(datadir) $(DESTDIR)/$(mandir)/man1 \
-		$(DESTDIR)/$(mandir)/man5
+		$(DESTDIR)/$(datadir)
 	for i in $(USR_BIN_FILES); do\
 		install -m 755 $$i $(DESTDIR)/$(bindir)/$$i;\
 	done
@@ -104,16 +98,9 @@ install: $(USR_BIN_FILES) $(SAMPLES) abuild.conf functions.sh
 	for i in adduser addgroup apk; do \
 		ln -fs abuild-sudo $(DESTDIR)/$(bindir)/abuild-$$i; \
 	done
-	for i in $(MAN_1_PAGES); do\
-		install -m 644 $$i $(DESTDIR)/$(mandir)/man1/$$i;\
-	done
-	for i in $(MAN_5_PAGES); do\
-		install -m 644 $$i $(DESTDIR)/$(mandir)/man5/$$i;\
-	done
 	if [ -n "$(DESTDIR)" ] || [ ! -f "/$(sysconfdir)"/abuild.conf ]; then\
 		cp abuild.conf $(DESTDIR)/$(sysconfdir)/; \
 	fi
-	cp $(SAMPLES) $(DESTDIR)/$(prefix)/share/abuild/
 	cp $(AUTOTOOLS_TOOLCHAIN_FILES) $(DESTDIR)/$(prefix)/share/abuild/
 	cp functions.sh $(DESTDIR)/$(datadir)/
 
diff --git a/abuild-keygen.in b/abuild-keygen.in
index de37299..79d05fa 100644
--- a/abuild-keygen.in
+++ b/abuild-keygen.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 # abuild-keygen - generate signing keys
 # Copyright (c) 2009 Natanael Copa <ncopa@alpinelinux.org>
diff --git a/abuild-sign.in b/abuild-sign.in
index 1ce3a88..adcaaac 100644
--- a/abuild-sign.in
+++ b/abuild-sign.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 # abuild-sign - sign indexes
 # Copyright (c) 2009 Natanael Copa <ncopa@alpinelinux.org>
diff --git a/abuild.in b/abuild.in
index 61f1265..045c6c6 100644
--- a/abuild.in
+++ b/abuild.in
@@ -1,4 +1,5 @@
-#!/bin/ash -e
+#!/usr/bin/busybox ash
+set -e
 
 # abuild - build apk packages (light version of makepkg)
 # Copyright (c) 2008-2015 Natanael Copa <ncopa@alpinelinux.org>
@@ -971,7 +971,7 @@ prepare_metafiles() {
 	EOF
 	local i deps
 	deps="$depends"
-	if [ "$pkgname" != "busybox" ] && ! depends_has busybox && ! depends_has /bin/sh; then
+	if [ "$pkgname" != "busybox" -o "$pkgname" != "filesystem" ] && ! depends_has busybox && ! depends_has /bin/sh; then
 		for i in $install $triggers; do
 			local s=${i%=*}
 			[ "$name" != "${s%.*}" ] && continue
@@ -1225,14 +1225,6 @@ trace_apk_deps() {
 		autodeps="$autodeps pkgconfig"
 	fi
 
-	# special case for libpthread: we need depend on libgcc
-	if [ "$CLIBC" = "uclibc" ] && [ -f "$dir"/.needs-so ] \
-			&& grep -q -w '^libpthread.so.*' "$dir"/.needs-so \
-			&& ! grep -q -w "^depend = libgcc" "$dir"/.PKGINFO; then
-		autodeps="$autodeps libgcc"
-		msg "  added libgcc (due to libpthread)"
-	fi
-
 	[ -f "$dir"/.needs-so ] && for i in $(cat "$dir"/.needs-so); do
 		# first check if its provided by same apkbuild
 		grep -q -w "^$sonameprefix$i" "$dir"/.provides-so 2>/dev/null && continue
@@ -2081,15 +2073,7 @@ builddeps() {
 	[ -n "$nodeps" ] && return 0
 
 	msg "Analyzing dependencies..."
-	case "$BOOTSTRAP" in
-	no*)	BUILD_BASE="";;
-	*)	if cross_creating || cross_compiling; then
-			BUILD_BASE="build-base-$CTARGET_ARCH"
-		else
-			BUILD_BASE="build-base"
-		fi
-	esac
-	calcdeps "$BUILD_BASE"
+	calcdeps musl
 
 	# find which deps are missing
 	local mbd mhd missing
@@ -2261,7 +2245,10 @@ rootbld() {
 
 	calcdeps
 	$SUDO_APK add --initdb --root "$BUILD_ROOT" --update \
-		abuild alpine-base build-base git $hostdeps $builddeps
+		filesytem
+
+	$SUDO_APK add --root "$BUILD_ROOT" --update \
+		abuild clang lld llvm-binutils gmake gnugrep gsed git $hostdeps $builddeps
 
 	local bwrap_opts=""
 	options_has "net" || bwrap_opts="$bwrap_opts --unshare-net"
@@ -2277,7 +2264,7 @@ rootbld() {
 		--bind "$BUILD_ROOT/tmp/src" "$srcdir" \
 		--bind "$BUILD_ROOT/tmp/pkg" "$pkgbasedir" \
 		--bind "$REPODEST" "$REPODEST" \
-		--hostname "build-$buildhost-$CARCH" \
+		--hostname "build-abyssos-$CARCH" \
 		--chdir "$startdir" \
 		--setenv PATH /bin:/usr/bin:/sbin:/usr/sbin \
 		/usr/bin/abuild $force rootbld_actions
@@ -2606,7 +2593,8 @@ SRCDEST=${SRCDEST:-$startdir}
 BUILD_ROOT=
 
 # set a default CC
-: ${CC:=gcc}
+: ${CC:=clang}
+: ${CXX:=clang++}
 export CC
 
 cd "$startdir" || die
diff --git a/abump.in b/abump.in
index efeb481..34313c3 100644
--- a/abump.in
+++ b/abump.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 # abump - bump pkgver in APKBUILDs
 # Copyright (c) 2012 Natanael Copa <ncopa@alpinelinux.org>
diff --git a/apkgrel.in b/apkgrel.in
index 1250136..d75a7be 100644
--- a/apkgrel.in
+++ b/apkgrel.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 # apkgrel - display or bump pkgrel in APKBUILDs
 # Copyright (c) 2012 Natanael Copa <ncopa@alpinelinux.org>
diff --git a/bootchartd b/bootchartd
deleted file mode 100755
index e265582..0000000
--- a/bootchartd
+++ /dev/null
@@ -1,198 +0,0 @@
-#!/bin/sh
-#
-# Bootchart logger script
-# Ziga Mahkovec  <ziga.mahkovec@klika.si>
-#
-# Modified heavily for Alpine Linux bootcharting
-# Timo Teras <timo.teras@iki.fi>
-#
-# This script is used for data collection for the bootchart
-# boot performance visualization tool (http://www.bootchart.org).
-#
-# This script is tied to Alpine Init scripts and charts the
-# bootup procedure only.
-#
-
-PATH="/sbin:/bin:/usr/sbin:/usr/bin:$PATH"
-
-# Configuration for bootchartd, the bootchart logger script.
-TMPFS_SIZE=32m
-SAMPLE_PERIOD=0.2
-PROCESS_ACCOUNTING="yes"
-BOOTLOG_DEST=/var/log/bootchart.tgz
-LOGDIR=/bootchart
-EXIT_PROC="mingetty agetty rungetty getty fgetty"
-
-# Monitoring commands
-log_cmd_1="cat /proc/stat"
-log_target_1=proc_stat.log
-
-# /proc/diskstats is available in 2.6 kernels
-log_cmd_2="cat /proc/diskstats"
-log_target_2=proc_diskstats.log
-
-log_cmd_3="cat /proc/[1-9]*/stat 2>/dev/null"
-log_target_3=proc_ps.log
-
-# Uncomment this line for diskless stations
-#log_cmd_4="cat /proc/net/dev"
-#log_target_4=proc_netdev.log
-
-max_log=3
-
-do_logging()
-{
-	# Enable process accounting if configured
-	if [ "$PROCESS_ACCOUNTING" = "yes" ]; then
-		[ -e kernel_pacct ] || : > kernel_pacct
-		accton kernel_pacct
-	fi
-
-	# open file descriptors
-	i=1
-	while [ $i -le $max_log ]; do
-		eval target=\"\$log_target_$i\"
-		if [ -z "$target" ]; then
-			max_log=$i
-			break
-		fi
-
-		fd=$((2 + $i))
-		eval exec $fd'>>$target'
-		eval log_fd_$i=$fd
-		i=$(($i + 1))
-	done
-
-	not_stop_logging=true
-	while $not_stop_logging && \
-	{ ! pidof $EXIT_PROC >/dev/null; }; do
-		if [ -r /proc/uptime ]; then
-			# Write the time (in jiffies).
-			read uptime < /proc/uptime
-			uptime=${uptime%% [0-9]*}
-			uptime=${uptime%.*}${uptime#*.}
-
-			i=1
-			while [ $i -le $max_log ]; do
-				eval fd=\$log_fd_$i\; cmd=\$log_cmd_$i
-
-				{
-					echo $uptime
-					# Log the command output
-					eval $cmd
-					echo
-				} >&$fd
-				i=$(($i + 1))
-			done
-		fi
-
-		sleep $SAMPLE_PERIOD
-	done
-
-	# close file descriptors
-	i=1
-	while [ $i -le $max_log ]; do
-		eval fd=\$log_fd_$i
-		eval exec $fd'>&-'
-		i=$(($i + 1))
-	done
-
-	[ -e kernel_pacct ] && accton
-}
-
-# Stop the boot logger.  The lock file is removed to force the loggers in
-# background to exit.  Some final log files are created and then all log files
-# from the tmpfs are packaged and stored in $BOOTLOG_DEST.
-finalize()
-{
-	# Stop process accounting if configured
-	local pacct=
-	[ -e kernel_pacct ] && pacct=kernel_pacct
-
-	# Write system information
-	# Log some basic information about the system.
-	(
-		echo "version = $VERSION"
-		echo "title = Boot chart for $( hostname | sed q ) ($( date ))"
-		echo "system.uname = $( uname -srvm | sed q )"
-		if [ -f /etc/alpine-release ]; then
-			echo "system.release = $( sed q /etc/alpine-release )"
-		elif [ -f /etc/gentoo-release ]; then
-			echo "system.release = $( sed q /etc/gentoo-release )"
-		elif [ -f /etc/SuSE-release ]; then
-			echo "system.release = $( sed q /etc/SuSE-release )"
-		elif [ -f /etc/debian_version ]; then
-			echo "system.release = Debian GNU/$( uname -s ) $( cat /etc/debian_version )"
-		elif [ -f /etc/frugalware-release ]; then
-			echo "system.release = $( sed q /etc/frugalware-release )"
-		elif [ -f /etc/pardus-release ]; then
-			echo "system.release = $( sed q /etc/pardus-release )"
-		else
-			echo "system.release = $( sed 's/\\.//g;q' /etc/issue )"
-		fi
-
-		# Get CPU count
-		local cpucount=$(grep -c '^processor' /proc/cpuinfo)
-		if [ $cpucount -gt 1 -a -n "$(grep 'sibling.*2' /proc/cpuinfo)" ]; then
-			# Hyper-Threading enabled
-			cpucount=$(( $cpucount / 2 ))
-		fi
-		if grep -q '^model name' /proc/cpuinfo; then
-			echo "system.cpu = $( grep '^model name' /proc/cpuinfo | sed q )"\
-			     "($cpucount)"
-		else
-			echo "system.cpu = $( grep '^cpu' /proc/cpuinfo | sed q )"\
-			     "($cpucount)"
-		fi
-
-		echo "system.kernel.options = $( sed q /proc/cmdline )"
-	) >> header
-
-	# Package log files
-	tar -zcf "$BOOTLOG_DEST" header $pacct *.log
-	rm "$LOGDIR"/*
-	rmdir "$LOGDIR"
-}
-
-case "$1" in
-start-initfs)
-	NEWROOT="$2"
-	(
-		cleanup=true
-		trap "not_stop_logging=false" USR1
-		trap "cleanup=false; not_stop_logging=false" USR2
-
-		mkdir "$LOGDIR"
-		cd "$LOGDIR"
-		do_logging
-		if $cleanup; then
-			sleep $SAMPLE_PERIOD
-			finalize
-		fi
-	) &
-	echo $! > $LOGDIR/bootchart.pid
-	;;
-stop-initfs)
-	NEWROOT="$2"
-
-	cd "$LOGDIR"
-	mkdir "$NEWROOT$LOGDIR"
-	cp /sbin/bootchartd $NEWROOT/sbin
-	PID=$(cat bootchart.pid)
-	kill -USR2 $PID
-	wait $PID
-	mv * "$NEWROOT$LOGDIR"
-	;;
-start-rootfs)
-	(
-		trap "not_stop_logging=false" USR1
-		cd "$LOGDIR"
-		do_logging
-		finalize
-	) &
-	shift
-	exec "$@"
-	;;
-esac
-
-exit 0
diff --git a/buildlab.in b/buildlab.in
index b5129ff..a5161ba 100644
--- a/buildlab.in
+++ b/buildlab.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 program_version=@VERSION@
 sysconfdir=@sysconfdir@
diff --git a/checkapk.in b/checkapk.in
index 334bbb9..cec066d 100644
--- a/checkapk.in
+++ b/checkapk.in
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/usr/bin/busybox ash
 
 # checkapk - find ABI breakages in package upgrades
 # Copyright (c) 2012 Natanael Copa <natanael.copa@gmail.com>
diff --git a/config.guess b/config.guess
index c4bd827..bdc9c91 100644
--- a/config.guess
+++ b/config.guess
@@ -1,4 +1,4 @@
-#! /bin/sh
+#!/usr/bin/busybox ash
 # Attempt to guess a canonical system name.
 #   Copyright 1992-2016 Free Software Foundation, Inc.
 
diff --git a/config.sub b/config.sub
index 9feb73b..a69690d 100644
--- a/config.sub
+++ b/config.sub
@@ -1,4 +1,4 @@
-#! /bin/sh
+#!/usr/bin/busybox ash
 # Configuration validation subroutine script.
 #   Copyright 1992-2016 Free Software Foundation, Inc.
 
diff --git a/functions.sh.in b/functions.sh.in
index 22c2c49..3b22265 100644
--- a/functions.sh.in
+++ b/functions.sh.in
@@ -6,18 +6,8 @@ program=${0##*/}
 arch_to_hostspec() {
 	case "$1" in
 	aarch64)	echo "aarch64-alpine-linux-musl" ;;
-	armel)		echo "armv5-alpine-linux-musleabi" ;;
-	armhf)		echo "armv6-alpine-linux-musleabihf" ;;
-	armv7)		echo "armv7-alpine-linux-musleabihf" ;;
-	mips)           echo "mips-alpine-linux-musl" ;;
 	mips64)         echo "mips64-alpine-linux-musl" ;;
-	mipsel)         echo "mipsel-alpine-linux-musl" ;;
-	mips64el)       echo "mips64el-alpine-linux-musl" ;;
-	ppc)		echo "powerpc-alpine-linux-musl" ;;
-	ppc64)		echo "powerpc64-alpine-linux-musl" ;;
 	ppc64le)	echo "powerpc64le-alpine-linux-musl" ;;
-	s390x)		echo "s390x-alpine-linux-musl" ;;
-	x86)		echo "i586-alpine-linux-musl" ;;
 	x86_64)		echo "x86_64-alpine-linux-musl" ;;
 	*)		echo "unknown" ;;
 	esac
@@ -26,29 +16,15 @@ arch_to_hostspec() {
 hostspec_to_arch() {
 	case "$1" in
 	aarch64*-*-*-*)		echo "aarch64" ;;
-	arm*-*-*-*eabi)		echo "armel" ;;
-	armv6*-*-*-*eabihf)	echo "armhf" ;;
-	armv7*-*-*-*eabihf)	echo "armv7" ;;
-	i[0-9]86-*-*-*)		echo "x86" ;;
-	mips-*-*-*)             echo "mips" ;;
 	mips64-*-*-*)           echo "mips64" ;;
-	mipsel-*-*-*)           echo "mipsel" ;;
-	mips64el-*-*-*)         echo "mips64el" ;;
-	powerpc-*-*-*)		echo "ppc" ;;
-	powerpc64-*-*-*)	echo "ppc64" ;;
 	powerpc64le-*-*-*)	echo "ppc64le" ;;
-	s390x-*-*-*)		echo "s390x" ;;
 	x86_64-*-*-*)		echo "x86_64" ;;
 	*)			echo "unknown" ;;
 	esac
 }
 
 hostspec_to_libc() {
-	case "$1" in
-	*-*-*-uclibc*)	echo "uclibc" ;;
-	*-*-*-musl*)	echo "musl" ;;
-	*-*-*-gnu*)	echo "glibc" ;;
-	*)		echo "unknown" ;;
+	echo musl
 	esac
 }
 
@@ -114,7 +90,7 @@ readconfig() {
 	PACKAGER=${_PACKAGER-$PACKAGER}
 	USE_COLORS=${_USE_COLORS-$USE_COLORS}
 
-	[ -z "$CBUILD" ] && CBUILD="$(gcc -dumpmachine)"
+	[ -z "$CBUILD" ] && CBUILD="$(clang -dumpmachine)"
 	[ -z "$CHOST" ] && CHOST="$CBUILD"
 	[ -z "$CTARGET" ] && CTARGET="$CHOST"
 	[ "$(arch_to_hostspec $CBUILD)" != "unknown" ] && CBUILD="$(arch_to_hostspec $CBUILD)"
@@ -149,9 +125,9 @@ readconfig() {
 			export HOSTCXXFLAGS="$CXXFLAGS"
 			export HOSTCFLAGS="$CFLAGS"
 			export HOSTLDFLAGS="$LDFLAGS"
-			export CC=${CROSS_COMPILE}gcc
-			export CXX=${CROSS_COMPILE}g++
-			export LD=${CROSS_COMPILE}ld
+			export CC=${CROSS_COMPILE}clang
+			export CXX=${CROSS_COMPILE}clang++
+			export LD=${CROSS_COMPILE}ld.lld
 			export CPPFLAGS="--sysroot=${CBUILDROOT} $CPPFLAGS"
 			export CXXFLAGS="--sysroot=${CBUILDROOT} $CXXFLAGS"
 			export CFLAGS="--sysroot=${CBUILDROOT} $CFLAGS"
diff --git a/newapkbuild.1 b/newapkbuild.1
deleted file mode 100644
index 5188e82..0000000
--- a/newapkbuild.1
+++ /dev/null
@@ -1,175 +0,0 @@
-.Dd November 4, 2017
-.Dt NEWAPKBUILD 1 PRM
-.Os "Alpine Linux"
-.Sh NAME
-.Nm newapkbuild
-.Nd generate a new APKBUILD
-.Sh SYNOPSIS
-.Nm
-.Op Fl n Ar NAME
-.Op Fl d Ar DESC
-.Op Fl l Ar LICENSE
-.Op Fl u Ar URL
-.Op Fl aCmpy
-.Op Fl cfhs
-.Op Ar pkgname Op Ar -pkgver
-.Nm
-.Op Fl n Ar NAME
-.Op Fl d Ar DESC
-.Op Fl l Ar LICENSE
-.Op Fl u Ar URL
-.Op Fl aCmpy
-.Op Fl cfhs
-.Op Ar source_url
-.Sh DESCRIPTION
-.Nm
-generates a new APKBUILD for use with
-.Xr abuild 1 .
-.Bl -tag -width "pkgname-pkgver" -offset indent -compact
-.It Fl n Ar NAME
-Specifies the name of the new package.
-A new directory called
-.Ar NAME
-will be created in the current directory, with the APKBUILD file.
-.It Fl d Ar DESC
-Specifies the description (pkgdesc=) for the new package.
-.It Fl l Ar LICENSE
-Specifies the license under which the new package is distributed.
-This should match an SPDX Identifier.
-.It Fl u Ar URL
-Specifies the Web page (url=) for the new package.
-This should
-.Em not
-be the source package URL; it should be the project's main Web page.
-.It Fl c
-Causes
-.Nm
-to additionally copy an init.d script, conf.d file, and sample pre- and post-
-install scripts to the APKBUILD directory.
-This allows you to have a quick start for daemon packages.
-.It Fl f
-Forces
-.Nm
-to overwrite an existing APKBUILD, if one already exists in the package
-directory.
-.It Fl h
-Displays usage information.
-.It Fl s
-Create an automatic SourceForge URL for the package based on its name and
-version.
-This is only valid if
-.Ar pkgname-pkgver
-is specified on the command line.
-.It Ar pkgname-pkgver
-Specify the package name, if not already specified by
-.Fl n .
-If followed by a dash (-) and a valid version string, additionally specify the
-package's version.
-.El
-.Ss Build system type
-.Nm
-will try to automatically detect the build system by inspecting the source
-directory if
-.Ar source_url
-is specified, and write out typical build instructions for that build system.
-If you do not specify the source URL, or you want to override auto-detection,
-you may specify one of the following four flags:
-.Bl -tag -width "-a" -offset indent -compact
-.It Fl a
-Specifies that the package uses autotools.
-The APKBUILD will contain a typical invocation of ./configure, make, and make
-install.
-.It Fl C
-Specifies that the package uses CMake.
-CMake will be added to the makedepends and a typical CMake invocation will be
-added to the APKBUILD.
-.It Fl m
-Specifies that the package uses Meson.
-A typical Meson and Ninja invocation will be added to the APKBUILD.
-.It Fl p
-Specifies that the package uses a Perl Makefile.PL file.
-The CPAN template will be used.
-.It Fl y
-Specifies that the package uses a Python setup.py build system.
-Python will be added to the makedepends.
-.El
-If you do not specify any option, and you do not specify the source URL, the
-generated APKBUILD file will not contain any build instructions.
-.Sh FILES
-All files generated will be placed in a
-.Pa pkgname
-directory inside the current working directory, with
-.Pa pkgname
-being created if it does not exist.
-.Bl -tag -width "pkgname.post-install" -compact
-.It Pa APKBUILD
-.Nm
-will create
-.Pa APKBUILD
-with the details gathered from the invocation of
-.Nm ,
-and introspection of the downloaded package source if
-.Ar source_url
-is provided.
-For more information about APKBUILD and its format, see
-.Xr APKBUILD 5 .
-.It Pa pkgname.initd
-If
-.Fl c
-is given,
-.Nm
-will create
-.Pa pkgname.initd
-with example data to assist in the creation of an init.d script for a daemon.
-.It Pa pkgname.confd
-If
-.Fl c
-is given,
-.Nm
-will create
-.Pa pkgname.confd
-to assist in the creation of a conf.d file for a daemon, used by init.d
-scripts.
-conf.d files are used to configure init.d scripts; for more information, see
-.Xr openrc 8
-and
-.Xr rc_config 3 .
-.It Pa pkgname.pre-install
-If
-.Fl c
-is given,
-.Nm
-will create
-.Pa pkgname.pre-install ,
-the contents of which will be run by
-.Xr apk 8
-before the package is installed.
-.It Pa pkgname.post-install
-If
-.Fl c
-is given,
-.Nm
-will create
-.Pa pkgname.post-install ,
-the contents of which will be run by
-.Xr apk 8
-after the package is successfully installed.
-For more information about apk install hooks, consult the
-.Xr apk 8
-manual.
-.El
-.Sh EXAMPLES
-newapkbuild -n sharutils -d "Utilities for manipulating shell archives" \\
-            -l "GPL-3.0+" -u "https://www.gnu.org/software/sharutils/" -a \\
-            https://ftp.gnu.org/gnu/sharutils/sharutils-4.15.2.tar.xz
-.Sh SEE ALSO
-SPDX license reference (on the Web at <https://spdx.org/licenses/>),
-.Xr abuild 1 ,
-.Xr apk 8 ,
-.Xr APKBUILD 5 .
-.Sh AUTHORS
-.Nm :
-.An Natanael Copa Aq Mt ncopa@alpinelinux.org
-.Pp
-Documentation:
-.An A. Wilcox Aq Mt awilfox@adelielinux.org
diff --git a/newapkbuild.in b/newapkbuild.in
deleted file mode 100644
index e119a17..0000000
--- a/newapkbuild.in
+++ /dev/null
@@ -1,450 +0,0 @@
-#!/bin/sh
-#
-# newapkbuild - generate a new APKBUILD
-# Copyright (c) 2009 Natanael Copa <natanael.copa@gmail.com>
-#
-# Distributed under GPL-2
-#
-
-program_version=@VERSION@
-datadir=@datadir@
-
-if ! [ -f "$datadir/functions.sh" ]; then
-	echo "$datadir/functions.sh: not found" >&2
-	exit 1
-fi
-. "$datadir/functions.sh"
-
-
-is_url() {
-	case "$1" in
-	http://*|https://*|ftp://*) return 0;;
-	esac
-	return 1
-}
-
-is_github_url() {
-	case $1 in
-	https://github.com/*/*/archive/*.tar.gz) return 0;;
-	esac
-	return 1
-}
-
-# Build sections
-build_make() {
-	cat >>APKBUILD<<__EOF__
-	make
-__EOF__
-}
-
-build_autotools() {
-	cat >>APKBUILD<<__EOF__
-	./configure \\
-		--build=\$CBUILD \\
-		--host=\$CHOST \\
-		--prefix=/usr \\
-		--sysconfdir=/etc \\
-		--mandir=/usr/share/man \\
-		--localstatedir=/var
-	make
-__EOF__
-}
-
-build_cmake() {
-# References:
-# http://www.cmake.org/Wiki/CMake_Useful_Variables
-# http://www.vtk.org/Wiki/CMake_Cross_Compiling
-# This is incomplete: CMAKE_{HOST_,}SYSTEM_PROCESSOR needs to be set,
-# and likewise CMAKE_FIND_ROOT_PATH and a few other details.
-
-	cat >>APKBUILD<<__EOF__
-	if [ "\$CBUILD" != "\$CHOST" ]; then
-		CMAKE_CROSSOPTS="-DCMAKE_SYSTEM_NAME=Linux -DCMAKE_HOST_SYSTEM_NAME=Linux"
-	fi
-	cmake \\
-		-DCMAKE_INSTALL_PREFIX=/usr \\
-		-DCMAKE_INSTALL_LIBDIR=lib \\
-		-DBUILD_SHARED_LIBS=True \\
-		-DCMAKE_BUILD_TYPE=Release \\
-		-DCMAKE_CXX_FLAGS="\$CXXFLAGS" \\
-		-DCMAKE_C_FLAGS="\$CFLAGS" \\
-		\${CMAKE_CROSSOPTS} .
-	make
-__EOF__
-}
-
-build_meson() {
-# References:
-# http://mesonbuild.com/Reference-manual.html
-# http://mesonbuild.com/Cross-compilation.html
-# TODO For cross compilation a cross_file needs to be created.
-
-	cat >>APKBUILD<<__EOF__
-	meson \\
-		--prefix=/usr \\
-		--sysconfdir=/etc \\
-		--mandir=/usr/share/man \\
-		--localstatedir=/var \\
-		--buildtype=release \\
-		. output
-	ninja -C output
-__EOF__
-}
-
-build_perl() {
-	cat >>APKBUILD<<__EOF__
-	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
-	make
-__EOF__
-}
-
-build_python() {
-	cat >>APKBUILD<<__EOF__
-	python3 setup.py build
-__EOF__
-}
-
-build_empty() {
-	cat >>APKBUILD<<__EOF__
-	# Replace with proper build command(s)
-	:
-__EOF__
-}
-
-# Check sections
-check_make() {
-	cat >>APKBUILD<<__EOF__
-	make check
-__EOF__
-}
-
-check_python() {
-	cat >>APKBUILD<<__EOF__
-	python3 setup.py test
-__EOF__
-}
-
-check_empty() {
-	cat >>APKBUILD<<__EOF__
-	# Replace with proper check command(s)
-	:
-__EOF__
-}
-
-check_meson() {
-	cat >>APKBUILD<<__EOF__
-	ninja -C output test
-__EOF__
-}
-
-# Package sections
-package_make() {
-	cat >>APKBUILD<<__EOF__
-	make DESTDIR="\$pkgdir" install
-__EOF__
-}
-
-package_autotools() {
-	package_make
-}
-
-package_meson() {
-	cat >>APKBUILD<<__EOF__
-	DESTDIR="\$pkgdir" ninja -C output install
-__EOF__
-}
-
-package_perl() {
-	cat >>APKBUILD<<__EOF__
-	make DESTDIR="\$pkgdir" install
-	find "\$pkgdir" \\( -name perllocal.pod -o -name .packlist \\) -delete
-__EOF__
-}
-
-package_python() {
-	cat >>APKBUILD<<__EOF__
-	python3 setup.py install --prefix=/usr --root="\$pkgdir"
-__EOF__
-}
-
-package_empty() {
-	cat >>APKBUILD<<__EOF__
-	# Replace with proper package command(s)
-	:
-__EOF__
-}
-
-# Create new aport from templates
-newaport() {
-	local newname="${1##*/}"
-	local pn=${newname%-[0-9]*}
-	local pv
-	local source=
-	is_url "$1" && source="$1"
-
-	if is_github_url $source; then
-		if [ -z "$pkgname" ]; then
-			pkgname=${source%/archive/*}
-			pkgname=${pkgname##*/}
-		fi
-		pv=${newname%.t*} #strip .tar.gz .tgz .tar.bz2 etc
-		pv=${pv#*[a-z]}
-		source="$pkgname-$pv.tar.gz::$source"
-	elif [ "$pn" != "$newname" ]; then
-		pv=${newname#$pn-}
-		pv=${pv%.t*} #strip .tar.gz .tgz .tar.bz2 etc
-	fi
-	if [ -z "$pkgname" ]; then
-		pkgname=$pn
-	fi
-	if [ -e "$pkgname"/APKBUILD ] && [ -z "$force" ]; then
-		error "$pkgname/APKBUILD already exists"
-		return 1
-	fi
-	mkdir -p "$pkgname"
-	cd "$pkgname"
-
-	if [ -z "$source" ] && [ -n "$sourceforge" ]; then
-		source="https://downloads.sourceforge.net/$pn/$pn-$pv.tar.gz"
-	fi
-
-	if [ -z "$depends" ] &&[ "$buildtype" = "python" ]; then
-		depends="python3"
-	fi
-
-	case "$buildtype" in
-	python) makedepends="python3-dev";;
-	cmake)  makedepends="cmake";;
-	meson)  makedepends="meson";;
-	*)      makedepends="\$depends_dev";;
-	esac
-
-	# Replace pkgver in $source
-	if [ -n "$source" ]; then
-		source=$(echo "$source" | sed "s/$pv/\$pkgver/g")
-	fi
-
-	# Copy init.d scripts if requested
-	if [ -n "$cpinitd" ]; then
-		cp "$datadir"/sample.initd $pkgname.initd
-		cp "$datadir"/sample.confd $pkgname.confd
-		cp "$datadir"/sample.pre-install $pkgname.pre-install
-		cp "$datadir"/sample.post-install $pkgname.post-install
-		install="\$pkgname.pre-install \$pkgname.post-install"
-		source="$source
-	$pkgname.initd
-	$pkgname.confd
-	"
-	fi
-
-	# Generate header with standard variables
-	cat >APKBUILD<<__EOF__
-# Contributor:${PACKAGER:+" "}${PACKAGER}
-# Maintainer:${MAINTAINER:+" "}${MAINTAINER}
-pkgname="$pkgname"
-pkgver="$pv"
-pkgrel=0
-pkgdesc="$pkgdesc"
-url="$url"
-arch="all"
-license="$license"
-depends="$depends"
-depends_dev=""
-makedepends="$makedepends"
-install="$install"
-subpackages="\$pkgname-dev \$pkgname-doc"
-source="$source"
-__EOF__
-
-	abuild -f fetch checksum unpack
-	# Figure out the builddir
-	for i in src/*; do
-		if [ -d "$i" ]; then
-			sdir=$i
-			builddir=$(echo ${i#*/} | sed "s/$pv/\$pkgver/g")
-		fi
-	done
-	printf 'builddir="$srcdir/%s"\n\n' "$builddir" >> APKBUILD
-
-	# Subpackage -dev is usually required only for C/C++. Since depends_dev
-	# confuses a lot people, remove it if there's no .h or .hpp file.
-	find "$sdir" -name "*.h" -o -name "*.hpp" -maxdepth 3 2>/dev/null \
-		| head -n 1 | grep -q ".*" \
-		|| sed -i -e '/^depends_dev=.*/d' -e 's/\$depends_dev\s*//' APKBUILD
-
-	# Try to autodetect the buildtype
-	if [ -z "$buildtype" ]; then
-		if [ -x "$sdir"/configure ]; then
-			buildtype="autotools"
-		elif [ -r "$sdir"/Makefile.PL ] || [ "${pn#perl-}" != "$pn" ]; then
-			buildtype="perl"
-		elif [ -r "$sdir"/waf ]; then
-			buildtype="waf"
-		elif [ -r "$sdir"/meson.build ]; then
-			buildtype="meson"
-		elif [ -d "$sdir"/cmake ] || [ -r "$sdir/CMakeLists.txt" ]; then
-			buildtype="cmake"
-		elif [ -r "$sdir"/Makefile ]; then
-			buildtype="make"
-		elif [ -r "$sdir"/setup.py ]; then
-			buildtype="python"
-		fi
-	fi
-
-	# Create build() function
-	cat >>APKBUILD<<__EOF__
-build() {
-__EOF__
-
-	case "$buildtype" in
-	make)
-		build_make;;
-	cmake)
-		build_cmake;;
-	meson)
-		build_meson;;
-	autotools)
-		build_autotools;;
-	perl)
-		build_perl;;
-	python)
-		build_python;;
-	*)
-		build_empty;;
-	esac
-
-	cat >>APKBUILD<<__EOF__
-}
-
-__EOF__
-
-	# Create check() function
-	cat >>APKBUILD<<__EOF__
-check() {
-__EOF__
-
-	case "$buildtype" in
-	make|cmake|autotools|perl)
-		check_make;;
-	python)
-		check_python;;
-	*)
-		check_empty;;
-	esac
-
-	cat >>APKBUILD<<__EOF__
-}
-
-__EOF__
-
-	# Create package() function
-	cat >>APKBUILD<<__EOF__
-package() {
-__EOF__
-
-	case "$buildtype" in
-	make|cmake)
-		package_make;;
-	autotools)
-		package_autotools;;
-	meson)
-		package_meson;;
-	perl)
-		package_perl;;
-	python)
-		package_python;;
-	*)
-		package_empty;;
-	esac
-
-	if [ -n "$cpinitd" ]; then
-		cat >>APKBUILD<<__EOF__
-
-	install -m755 -D "\$srcdir"/\$pkgname.initd \\
-		"\$pkgdir"/etc/init.d/\$pkgname
-	install -m644 -D "\$srcdir"/\$pkgname.confd \\
-		"\$pkgdir"/etc/conf.d/\$pkgname
-__EOF__
-	fi
-	cat >>APKBUILD<<__EOF__
-}
-
-__EOF__
-
-	# regenerate checksum so they end last in APKBUILD
-	abuild -f checksum
-}
-
-usage() {
-	cat >&2 <<-__EOF__
-		$program $program_version - generate a new APKBUILD
-		Usage: $program [-n PKGNAME] [-d PKGDESC] [-l LICENSE] [-u URL]
-		       [-a | -C | -m | -p | -y] [-s] [-c] [-f] [-h]
-		       PKGNAME[-PKGVER] | SRCURL
-		Options:
-		  -n  Set package name to PKGNAME (only use with SRCURL)
-		  -d  Set package description to PKGDESC
-		  -l  Set package license to LICENSE, use identifiers from:
-		      <https://spdx.org/licenses/>
-		  -u  Set package URL
-		  -a  Create autotools package (use ./configure ...)
-		  -C  Create CMake package (Assume cmake/ is there)
-		  -m  Create meson package (Assume meson.build is there)
-		  -p  Create perl package (Assume Makefile.PL is there)
-		  -y  Create python package (Assume setup.py is there)
-		  -s  Use sourceforge source URL
-		  -c  Copy a sample init.d, conf.d, and install script
-		  -f  Force even if directory already exists
-		  -h  Show this help
-	__EOF__
-}
-
-set_buildtype() {
-	if [ -n "$buildtype" ]; then
-		error "More than one buildtype flag specified ($buildtype and $1)"
-		exit 1
-	fi
-	buildtype="$1"
-}
-
-check_arguments() {
-	if [ $# -eq 0 ]; then
-		error "Missing required argument: PKGNAME[-PKGVER] | SRCURL"
-		exit 1
-	fi
-	if [ $# -gt 1 ]; then
-		shift
-		error "Unrecognized arguments: $*"
-		exit 1
-	fi
-	if ! is_url "$1" && [ -n "$pkgname" ]; then
-		error "-n is only allowed when using SRCURL as last argument"
-		exit 1
-	fi
-	if is_url "$1" && [ -n "$sourceforge" ]; then
-		error "-s is only allowed when using PKGNAME as last argument"
-		exit 1
-	fi
-}
-
-while getopts "acCmd:fhl:n:pyu:s" opt; do
-	case $opt in
-		'a') set_buildtype "autotools";;
-		'c') cpinitd=1;;
-		'C') set_buildtype "cmake";;
-		'm') set_buildtype "meson";;
-		'd') pkgdesc="$OPTARG";;
-		'f') force=1;;
-		'h') usage; exit;;
-		'l') license="$OPTARG";;
-		'n') pkgname="$OPTARG";;
-		'p') set_buildtype "perl";;
-		'y') set_buildtype "python";;
-		'u') url="$OPTARG";;
-		's') sourceforge=1;;
-	esac
-done
-shift $(( $OPTIND - 1 ))
-
-check_arguments "$@"
-newaport $1
diff --git a/sample.APKBUILD b/sample.APKBUILD
deleted file mode 100644
index 7df007c..0000000
--- a/sample.APKBUILD
+++ /dev/null
@@ -1,53 +0,0 @@
-# This is an example APKBUILD file. Use this as a start to creating your own,
-# and remove these comments.
-# NOTE: Please fill out the license field for your package! If it is unknown,
-# then please put 'unknown'.
-
-# Contributor: Your Name <youremail@domain.com>
-# Maintainer: Your Name <youremail@domain.com>
-pkgname=NAME
-pkgver=VERSION
-pkgrel=0
-pkgdesc=""
-url=""
-arch="all"
-license="GPL"
-depends=
-depends_dev=
-makedepends="$depends_dev"
-install=
-subpackages="$pkgname-dev $pkgname-doc"
-source="https://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz"
-
-builddir="$srcdir"/$pkgname-$pkgver
-
-prepare() {
-	cd "$builddir"
-}
-
-build() {
-	cd "$builddir"
-	./configure --prefix=/usr \
-		--sysconfdir=/etc \
-		--mandir=/usr/share/man \
-		--infodir=/usr/share/info
-	make
-}
-
-package() {
-	cd "$builddir"
-	make DESTDIR="$pkgdir" install
-
-	# remove the 2 lines below (and this) if there is no init.d script
-	# install -m755 -D "$srcdir"/$pkgname.initd "$pkgdir"/etc/init.d/$pkgname
-	# install -m644 -D "$srcdir"/$pkgname.confd "$pkgdir"/etc/conf.d/$pkgname
-}
-
-check() {
-	# uncomment the 2 lines below if there is a testsuite.  we assume the testsuite
-	# is run using "make check", which is the default for autotools-based build systems.
-	# cd "$builddir"
-	# make check
-}
-
-md5sums="" #generate with 'abuild checksum'
diff --git a/sample.confd b/sample.confd
deleted file mode 100644
index 486252b..0000000
--- a/sample.confd
+++ /dev/null
@@ -1,7 +0,0 @@
-# Sample conf.d file for alpine linux
-
-#
-# Specify daemon options here.
-#
-
-sample_opts=""
diff --git a/sample.initd b/sample.initd
deleted file mode 100644
index 0dc706c..0000000
--- a/sample.initd
+++ /dev/null
@@ -1,16 +0,0 @@
-#!/sbin/openrc-run
-
-# Sample init.d file for alpine linux.
-
-name=
-command="/usr/sbin/$name"
-command_args="$sample_opts"
-command_background="yes"
-
-start_stop_daemon_args="--user $sample_user:$sample_group"
-pidfile="/run/$name.pid"
-
-depend() {
-	need net
-	after firewall
-}
diff --git a/sample.post-install b/sample.post-install
deleted file mode 100644
index 0586fcd..0000000
--- a/sample.post-install
+++ /dev/null
@@ -1,4 +0,0 @@
-#!/bin/sh
-
-# add something which happends after install
-
diff --git a/sample.pre-install b/sample.pre-install
deleted file mode 100644
index 46079e0..0000000
--- a/sample.pre-install
+++ /dev/null
@@ -1,4 +0,0 @@
-#!/bin/sh
-
-# add something which happends before install
-
