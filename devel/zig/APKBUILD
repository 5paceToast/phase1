pkgname=zig
pkgver=0.5.0.20200327
_hash=aec4967f36d16cfee43529bd341300f5f77af34a
pkgrel=0
pkgdesc="Zig!"
url="https://github.com/ziglang/zig"
arch="all"
license="MIT"
depends="abyss-base-dev"
makedepends="ninja cmake"
source="$pkgname-$pkgver.tar.gz::https://github.com/ziglang/zig/archive/$_hash.tar.gz
		targets.patch"

builddir=$srcdir/$pkgname-$_hash
_builddir=$srcdir/build

prepare() {
	default_prepare
	mkdir -p $_builddir && cd $_builddir
	cmake -G Ninja -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release -DCMAKE_SKIP_INSTALL_RPATH=YES $builddir
}

build() {
	cd $_builddir
	ninja
}

package() {
	cd $_builddir
	DESTDIR=$pkgdir ninja install
}

b2sums="549b1f39bd1531fbb3e5bee448c42bff0eab69cc17d304c703c7b9fded0a1e9d2f7b22c78d937d6ba2c9ef1f34edc9aaf74025699d9c955a3ebc471b0b391da5  zig-0.5.0.20200327.tar.gz
7707d04f9b2afe51380fb34cc21346e945d810c898131738e1dfbbb76b66530bcc19fff6027e5cfad8b4e67dd40c4acb9bea3b3b32c4621113385870f9062d5f  targets.patch"
